#!/bin/bash

profile=~/.mozilla/firefox/

# last line of `du` is `total`
echo "Before..."
find "$profile" -name '*.sqlite' -print0 | xargs -0 du -hc | tail -1

find "$profile" -name '*.sqlite' -exec sqlite3 '{}' VACUUM ';'
find "$profile" -name '*.sqlite' -exec sqlite3 '{}' REINDEX ';'

echo "After:"
find "$profile" -name '*.sqlite' -print0 | xargs -0 du -hc | tail -1
